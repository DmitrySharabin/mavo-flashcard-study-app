<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <!-- PWA -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="manifest" href="./manifest.webmanifest">
    <meta name="theme-color" content="#00449e">
    <meta name="author" content="Dmitry Sharabin">
    <meta name="keywords" content="Mavo,Flashcard,French">
    <!-- Mavo -->
    <script src="https://dev.mavo.io/dist/mavo.min.js"></script>
    <link rel="stylesheet" href="https://dev.mavo.io/dist/mavo.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <!-- App CSS -->
    <link rel="stylesheet" href="./app.css">
    <title>Flashcard Study | Mavo</title>
</head>

<body>
    <header>
        <h1>Flashcard Study</h1>
    </header>

    <main mv-app="FlashcardStudyApp" mv-storage="local" mv-autosave="3">

        <meta property="specialCharacters" mv-default="à â ä ç è é ê ë î ï ô ù û ü œ">

        <button title="Add flashcard" class="mv-add-flashcard">
            <i class="fa fa-plus"></i>Add Flashcard
        </button>

        <section>
            <article property="flashcard" mv-multiple mv-initial-items="0" mv-mode="edit">

                <meta property="mode" mv-default="edit">
                <meta property="translationVisible" mv-default="false">

                <aside title="Rank">
                    <input type="number" min="0" mv-if="mode = edit" property="rank" mv-default="0">
                    <span mv-if="mode = read">[rank]</span>
                </aside>

                <h2>Word, phrase, or sentence</h2>
                <textarea property="source" mv-if="mode = edit"></textarea>

                <details mv-if="mode = edit">
                    <summary>Special Characters</summary>
                    <span property="character4source" mv-multiple mv-value="split(uppercase(specialCharacters) & ' ' & specialCharacters)"
                          mv-action="set(source, source & character4source)" mv-mode="read" title="[character4source]" tabindex="0"></span>
                </details>

                <p mv-if="mode = read" mv-action="set(mode, edit)">
                    [source]
                </p>

                <button mv-if="mode = read and !translationVisible"
                        mv-action="set(translationVisible, true)"
                        class="show-translation">
                    <i class="fa fa-eye"></i>Show Translation
                </button>

                <h2 mv-if="mode = edit or translationVisible">Translation</h2>
                <textarea property="translation" mv-if="mode = edit" lang="fr"></textarea>

                <p mv-if="mode = read and translationVisible" mv-action="set(mode, edit)">
                    [translation]
                </p>

                <h2 mv-if="mode = edit or (translationVisible and len(example) > 0)">Example</h2>
                <textarea property="example" mv-if="mode = edit" lang="fr"></textarea>

                <p mv-if="mode = read and translationVisible and len(example) > 0" mv-action="set(mode, edit)">
                    [example]
                </p>

                <details mv-if="mode = edit">
                    <summary>Special Characters</summary>
                    <span property="character4example" mv-multiple mv-value="split(uppercase(specialCharacters) & ' ' & specialCharacters)"
                          mv-action="set(example, example & character4example)" mv-mode="read" title="[character4example]" tabindex="0"></span>
                </details>

                <button mv-if="mode = edit"
                        mv-action="set(mode, read), set(translationVisible, false)"
                        disabled="[len(source) = 0 or len(translation) = 0 or len(rank) = 0]">
                    Save
                </button>

                <section mv-if="mode = read and translationVisible">
                    <button mv-action="set(rank, 0), set(translationVisible, false), move(flashcard, 0)">
                        Bad
                    </button>
                    <button mv-action="set(rank, rank + 1), set(translationVisible, false)">
                        Good
                    </button>
                    <button mv-action="set(rank, rank + 2), set(translationVisible, false), move(flashcard, count($all))">
                        Great
                    </button>
                </section>

            </article>
        </section>

        <section class="mv-bar" mv-bar="import export no-save no-edit">
            <button class="mv-import" title="Load flashcards from file">
                <i class="fa fa-upload"></i>Import
            </button>
            <button mv-if="count(flashcard) > 0" class="mv-export" title="Save flashcards to file">
                <i class="fa fa-download"></i>Export
            </button>
            <button mv-if="count(flashcard) > 0" mv-action="delete(flashcard where len(source) > 0)" title="Delete all flashcards">
                <i class="fa fa-trash"></i>Reset
            </button>
        </section>
    </main>

    <footer>
        <p>
            Inspired by <a href="http://lea.verou.me/" target="_blank">Lea Verou</a>
            and <a href="https://www.knowthen.com/" target="_blank">James Moore</a> and all the hard work
            they do by sharing their experience and knowledge.
            Made with ♥︎ by <a href="https://d12n.me/" target="_blank">Dmitry Sharabin</a>
            using <a href="https://mavo.io/" target="_blank">Mavo</a>.
        </p>
    </footer>
</body>

</html>
